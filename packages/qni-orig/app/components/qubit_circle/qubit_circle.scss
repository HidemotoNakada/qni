.qubit-circle {
  $parent: &;

  @apply flex flex-col justify-start items-center;

  // tooltip
  --balloon-color: theme("colors.indigo.500");
  --balloon-font-size: theme("fontSize.xs");

  @each $nqubit in $nqubits {
    .circle-notation[data-circle-notation-nqubit="#{$nqubit}"] & > svg {
      @apply h-#{map-get($qubit-circle-size-mobile, $nqubit)};
      @apply w-#{map-get($qubit-circle-size-mobile, $nqubit)};

      @screen md {
        @apply h-#{map-get($qubit-circle-size, $nqubit)};
        @apply w-#{map-get($qubit-circle-size, $nqubit)};
      }
    }

    .circle-notation[data-circle-notation-nqubit="#{$nqubit}"] & &__border {
      stroke-width: #{map-get($qubit-circle-border-width-mobile, $nqubit)};

      @screen md {
        stroke-width: #{map-get($qubit-circle-border-width, $nqubit)};
      }
    }

    .circle-notation[data-circle-notation-nqubit="#{$nqubit}"] & &__ket {
      @apply leading-none;

      $font-size: map-get($qubit-circle-ket-font-size-mobile, $nqubit);
      @if $font-size {
        @apply text-#{$font-size};
      } @else {
        @apply hidden;
      }

      @screen md {
        $font-size-md: map-get($qubit-circle-ket-font-size, $nqubit);
        @if $font-size-md {
          @apply block;
          @apply text-#{$font-size-md};
        } @else {
          @apply hidden;
        }
      }
    }
  }

  &__border {
    @apply text-gray-400;

    #{$parent}:hover & {
      @apply text-red-500;
    }
  }

  &__phase {
    @apply opacity-70;
    @apply origin-center;
    @apply text-blue-700;

    #{$parent}:hover & {
      @apply text-yellow-700;
    }
  }

  &__magnitude {
    @apply origin-center;
    @apply text-blue-200;

    #{$parent}:hover & {
      @apply text-pink-300;
    }
  }

  @for $phase from 0 through 360 {
    &[data-phase^="#{$phase}."] &__phase {
      @apply transform rotate-#{360 - $phase};
    }

    &[data-phase^="-#{$phase}."] &__phase {
      @apply transform rotate-#{$phase};
    }
  }

  &[data-magnitude="0.00000"] &__magnitude,
  &[data-magnitude="0.00000"] &__phase {
    @apply hidden;
  }

  &[data-magnitude="1.00000"] &__magnitude {
    @apply transform scale-100;
  }

  $zmagnitude: "";
  @for $magnitude from 1 through 99 {
    @if $magnitude < 10 {
      $zmagnitude: "0#{$magnitude}";
    } @else {
      $zmagnitude: $magnitude;
    }

    &[data-magnitude^="0.#{$zmagnitude}"] &__magnitude {
      transform: scale(#{$magnitude / 100});
    }
  }

  &__ket {
    @apply text-gray-400;
    @apply whitespace-nowrap;
  }
}
