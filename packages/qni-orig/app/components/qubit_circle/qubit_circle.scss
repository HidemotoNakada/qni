.qubit-circle {
  $parent: &;

  @apply relative;
  @apply m-px;

  @apply border-wolf;
  @apply rounded-full;

  // Disable double tap zoom
  touch-action: manipulation;

  &:hover {
    @apply border-cardinal;
  }

  &.qubit-circle--magnitude-0 {
    @apply border-opacity-25;
  }

  @each $nqubit in $nqubits {
    #circle-notation[data-circle-notation-nqubit="#{$nqubit}"] & {
      border-width: #{map-get($qubit-circle-border-width-px-mobile, $nqubit)}px;

      @screen md {
        border-width: #{map-get($qubit-circle-border-width-px, $nqubit)}px;
      }
    }
  }

  &--will-change {
    #{$parent}__magnitude {
      will-change: transform;
    }

    #{$parent}__phase {
      will-change: transform;
    }
  }

  @each $nqubit in $nqubits {
    #circle-notation[data-circle-notation-nqubit="#{$nqubit}"] & {
      height: #{map-get($qubit-circle-size-px-mobile, $nqubit)}px;
      width: #{map-get($qubit-circle-size-px-mobile, $nqubit)}px;

      @screen md {
        height: #{map-get($qubit-circle-size-px, $nqubit)}px;
        width: #{map-get($qubit-circle-size-px, $nqubit)}px;
      }
    }
  }

  &__magnitude {
    @apply absolute inset-0;
    @apply bg-magnitude;
    @apply rounded-full;
    @apply transform scale-0 origin-center;

    #{$parent}:hover > & {
      @apply bg-fox;
    }

    // 1..100 (step = 10)
    @for $magnitude from 1 through 10 {
      #{$parent}--magnitude-#{$magnitude * 10} > & {
        @apply scale-#{$magnitude * 10};
      }
    }
  }

  &__phase {
    @apply absolute top-0 left-0 right-0;
    @apply bg-eel;
    @apply h-1/2;
    @apply mx-auto;
    @apply transform rotate-0 origin-bottom;

    @each $nqubit in $nqubits {
      #circle-notation[data-circle-notation-nqubit="#{$nqubit}"] & {
        width: #{map-get($qubit-circle-border-width-px-mobile, $nqubit)}px;

        @screen md {
          width: #{map-get($qubit-circle-border-width-px, $nqubit)}px;
        }
      }
    }

    #{$parent}--magnitude-0 > & {
      @apply transform scale-0;
    }

    // 10, 20, 30, ..., 360 (step = 10)
    @for $phase from 1 through 36 {
      #{$parent}--phase-#{$phase * 10} > & {
        @apply transform -rotate-#{$phase * 10};
      }
    }
  }
}
