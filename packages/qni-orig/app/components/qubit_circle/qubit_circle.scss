.qubit-circle {
  $parent: &;

  @each $nqubit in $nqubits {
    .circle-notation[data-circle-notation-nqubit="#{$nqubit}"] & {
      @apply h-#{map-get($qubit-circle-size-mobile, $nqubit)};
      @apply w-#{map-get($qubit-circle-size-mobile, $nqubit)};

      @screen md {
        @apply h-#{map-get($qubit-circle-size, $nqubit)};
        @apply w-#{map-get($qubit-circle-size, $nqubit)};
      }
    }
  }

  // tooltip
  --balloon-color: theme("colors.indigo.500");
  --balloon-font-size: theme("fontSize.xs");

  // Disable double tap zoom
  touch-action: manipulation;

  &__border {
    @apply absolute;
    @apply rounded-full;
    @apply border-#{$qubit-circle-border-color};
    will-change: opacity;

    @each $nqubit in $nqubits {
      .circle-notation[data-circle-notation-nqubit="#{$nqubit}"] & {
        @apply border-#{map-get($qubit-circle-border-width-mobile, $nqubit)};
        @apply h-#{map-get($qubit-circle-size-mobile, $nqubit)};
        @apply w-#{map-get($qubit-circle-size-mobile, $nqubit)};

        @screen md {
          @apply border-#{map-get($qubit-circle-border-width, $nqubit)};
          @apply h-#{map-get($qubit-circle-size, $nqubit)};
          @apply w-#{map-get($qubit-circle-size, $nqubit)};
        }
      }
    }

    #{$parent}:hover & {
      @apply border-#{$qubit-circle-border-hover-color};
    }

    #{$parent}[data-magnitude-int="0"] & {
      @apply opacity-25;
    }
  }

  &__phase {
    @apply absolute;
    @apply origin-center;
    @apply text-#{$qubit-circle-phase-color};
    @apply transition-transform;
    will-change: transform;

    @each $nqubit in $nqubits {
      .circle-notation[data-circle-notation-nqubit="#{$nqubit}"] & {
        @apply h-#{map-get($qubit-circle-size-mobile, $nqubit)};
        @apply w-#{map-get($qubit-circle-size-mobile, $nqubit)};

        @screen md {
          @apply h-#{map-get($qubit-circle-size, $nqubit)};
          @apply w-#{map-get($qubit-circle-size, $nqubit)};
        }
      }
    }

    #{$parent}:hover & {
      @apply text-#{$qubit-circle-phase-hover-color};
    }

    #{$parent}[data-phase-int="0"] & {
      @apply transform rotate-0;
    }

    @for $phase from 1 through 360 {
      #{$parent}[data-phase-int="#{$phase}"] & {
        @apply transform -rotate-#{$phase};
      }

      #{$parent}[data-phase-int="-#{$phase}"] & {
        @apply transform rotate-#{$phase};
      }
    }

    #{$parent}[data-magnitude-int="0"] & {
      @apply transform scale-0;
    }
  }

  &__phase-line {
    @each $nqubit in $nqubits {
      .circle-notation[data-circle-notation-nqubit="#{$nqubit}"] & {
        @apply stroke-#{map-get($qubit-circle-border-width-mobile, $nqubit)};

        @screen md {
          @apply stroke-#{map-get($qubit-circle-border-width, $nqubit)};
        }
      }
    }
  }

  &__magnitude {
    @apply absolute;
    @apply bg-#{$qubit-circle-magnitude-color};
    @apply origin-center;
    @apply rounded-full;
    @apply transform scale-0;
    @apply transition-transform;
    will-change: transform;

    @each $nqubit in $nqubits {
      .circle-notation[data-circle-notation-nqubit="#{$nqubit}"] & {
        @apply h-#{map-get($qubit-circle-size-mobile, $nqubit)};
        @apply w-#{map-get($qubit-circle-size-mobile, $nqubit)};

        @screen md {
          @apply h-#{map-get($qubit-circle-size, $nqubit)};
          @apply w-#{map-get($qubit-circle-size, $nqubit)};
        }
      }
    }

    #{$parent}:hover & {
      @apply bg-#{$qubit-circle-magnitude-hover-color};
    }

    $zmagnitude: "";
    @for $magnitude from 1 through 100 {
      #{$parent}[data-magnitude-int="#{$magnitude}"] & {
        @apply transform scale-#{$magnitude};
      }
    }
  }
}
