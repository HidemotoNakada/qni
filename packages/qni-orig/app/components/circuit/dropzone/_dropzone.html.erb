<% dropzone = local_assigns.fetch(:dropzone) %>

<%= tag.div class: class_string('dropzone',
                                'dropzone--circuit' => dropzone.circuit?,
                                'dropzone--palette' => dropzone.palette?,
                                'dropzone--trash' => dropzone.trash?,
                                'dropzone--occupied' => dropzone.occupied?,
                                'dropzone--wire-inactive' => !dropzone.wire_active?,
                                'dropzone--input-wire-inactive' => !dropzone.input_wire_active?,
                                'dropzone--output-wire-inactive' => !dropzone.output_wire_active?,
                                'dropzone--no-wire' => dropzone.no_wire?,
                                'dropzone--connected-with-lower-bit' => dropzone.wire_top?,
                                'dropzone--connected-with-upper-bit' => dropzone.wire_bottom?) do %>
  <%= dropzone.content %>
  <svg class="dropzone__wire" width="100" height="100" viewBox="0 0 100 100" preserveAspectRatio="none">
    <g>
      <line class="dropzone__wire-left" x1="0" y1="50" x2="50" y2="50" stroke-width="2" stroke="currentColor" vector-effect="non-scaling-stroke"></line>
      <line class="dropzone__wire-right" x1="50" y1="50" x2="100" y2="50" stroke-width="2" stroke="currentColor" vector-effect="non-scaling-stroke"></line>
    </g>
  </svg>
  <%= connection_top %>
  <%= connection_bottom %>
<% end %>
