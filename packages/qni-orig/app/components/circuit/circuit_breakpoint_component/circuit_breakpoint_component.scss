@use "sass:math";

.circuit-breakpoint {
  $parent: &;

  @apply cursor-pointer;
  @apply min-h-0;
  @apply min-w-full;
  @apply relative;

  @each $nqubit in $nqubits {
    .circuit[data-nqubit="#{$nqubit}"] & {
      @apply -mx-#{math.div(map-get($instruction-size, $nqubit), 2)};

      @screen md {
        @apply mx-0;
      }
    }
  }

  @screen md {
    @apply -my-#{math.div($instruction-size-base, 2)};
    @apply min-h-full;
    @apply min-w-0;
  }

  .circuit-preview & {
    @apply hidden;
  }

  &__body {
    @apply absolute inset-0;
    @apply bg-cardinal;
    @apply opacity-0;
    @apply z-10;

    margin-top: -#{math.div($circuit-breakpoint-width-px, 2)}px;
    padding: #{math.div($circuit-breakpoint-width-px, 2)}px;
    will-change: opacity;

    @screen md {
      @apply mt-0;
      margin-left: -#{math.div($circuit-breakpoint-width-px, 2)}px;
    }

    .circuit-step--done:hover & {
      @screen md {
        @apply opacity-30;
      }
    }

    #{$parent}--active & {
      @apply opacity-80;
    }

    .circuit-step--done:hover #{$parent}--active & {
      @screen md {
        @apply opacity-100;
      }
    }
  }
}
