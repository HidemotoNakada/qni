<%= circuit nqubit: 10 do %>
  <%= circuit_step do %>
    <%= qubit_label '0x1' %>
    <%= qubit_label '0x2' %>
    <%= qubit_label '0x4' %>
    <%= qubit_label '0x8' %>
    <%= qubit_label '0x10' %>
    <%= qubit_label '0x20' %>
    <%= qubit_label '0x40' %>
    <%= qubit_label '0x80' %>
    <%= qubit_label '0x100' %>
    <%= qubit_label '0x200' %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone do %>
      <%= write 0 %>
    <% end %>
    <%= dropzone do %>
      <%= write 0 %>
    <% end %>
    <%= dropzone do %>
      <%= write 0 %>
    <% end %>
    <%= dropzone do %>
      <%= write 0 %>
    <% end %>
    <%= dropzone do %>
      <%= write 0 %>
    <% end %>
    <%= dropzone do %>
      <%= write 0 %>
    <% end %>
    <%= dropzone do %>
      <%= write 0 %>
    <% end %>
    <%= dropzone do %>
      <%= write 0 %>
    <% end %>
    <%= dropzone do %>
      <%= write 0 %>
    <% end %>
    <%= dropzone do %>
      <%= write 0 %>
    <% end %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone do %>
      <%= hadamard_gate %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone do %>
      <%= phase_gate bit: 0, phi: 'π/2', controls: [1], targets: [0] %>
    <% end %>
    <%= dropzone do %>
      <%= control_gate bit: 1, targets: [0], controls: [1] %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone %>
    <%= dropzone do %>
      <%= hadamard_gate %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone do %>
      <%= phase_gate bit: 0, phi: 'π/4', controls: [2], targets: [1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 1, phi: 'π/2', controls: [2], targets: [1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= control_gate bit: 2, targets: [1, 0], controls: [2] %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone do %>
      <%= hadamard_gate %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone do %>
      <%= phase_gate bit: 0, phi: 'π/8', controls: [3], targets: [2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 1, phi: 'π/4', controls: [3], targets: [2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 2, phi: 'π/2', controls: [3], targets: [2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= control_gate bit: 3, targets: [2, 1, 0], controls: [3] %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone do %>
      <%= hadamard_gate %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone do %>
      <%= phase_gate bit: 0, phi: 'π/16', controls: [4], targets: [3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 1, phi: 'π/8', controls: [4], targets: [3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 2, phi: 'π/4', controls: [4], targets: [3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 3, phi: 'π/2', controls: [4], targets: [3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= control_gate bit: 4, targets: [3, 2, 1, 0], controls: [4] %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone do %>
      <%= hadamard_gate %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone do %>
      <%= phase_gate bit: 0, phi: 'π/32', controls: [5], targets: [4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 1, phi: 'π/16', controls: [5], targets: [4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 2, phi: 'π/8', controls: [5], targets: [4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 3, phi: 'π/4', controls: [5], targets: [4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 4, phi: 'π/2', controls: [5], targets: [4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= control_gate bit: 5, targets: [4, 3, 2, 1, 0], controls: [5] %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone do %>
      <%= hadamard_gate %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone do %>
      <%= phase_gate bit: 0, phi: 'π/64', controls: [6], targets: [5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 1, phi: 'π/32', controls: [6], targets: [5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 2, phi: 'π/16', controls: [6], targets: [5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 3, phi: 'π/8', controls: [6], targets: [5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 4, phi: 'π/4', controls: [6], targets: [5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 5, phi: 'π/2', controls: [6], targets: [5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= control_gate bit: 6, targets: [5, 4, 3, 2, 1, 0], controls: [6] %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone do %>
      <%= hadamard_gate %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone do %>
      <%= phase_gate bit: 0, phi: 'π/128', controls: [7], targets: [6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 1, phi: 'π/64', controls: [7], targets: [6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 2, phi: 'π/32', controls: [7], targets: [6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 3, phi: 'π/16', controls: [7], targets: [6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 4, phi: 'π/8', controls: [7], targets: [6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 5, phi: 'π/4', controls: [7], targets: [6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 6, phi: 'π/2', controls: [7], targets: [6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= control_gate bit: 7, targets: [6, 5, 4, 3, 2, 1, 0], controls: [7] %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone do %>
      <%= hadamard_gate %>
    <% end %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone do %>
      <%= phase_gate bit: 0, phi: 'π/256', controls: [8], targets: [7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 1, phi: 'π/128', controls: [8], targets: [7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 2, phi: 'π/64', controls: [8], targets: [7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 3, phi: 'π/32', controls: [8], targets: [7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 4, phi: 'π/16', controls: [8], targets: [7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 5, phi: 'π/8', controls: [8], targets: [7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 6, phi: 'π/4', controls: [8], targets: [7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 7, phi: 'π/2', controls: [8], targets: [7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= control_gate bit: 8, targets: [7, 6, 5, 4, 3, 2, 1, 0], controls: [8] %>
    <% end %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone do %>
      <%= hadamard_gate %>
    <% end %>
    <%= dropzone %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone do %>
      <%= phase_gate bit: 0, phi: 'π/512', controls: [9], targets: [8, 7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 1, phi: 'π/256', controls: [9], targets: [8, 7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 2, phi: 'π/128', controls: [9], targets: [8, 7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 3, phi: 'π/64', controls: [9], targets: [8, 7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 4, phi: 'π/32', controls: [9], targets: [8, 7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 5, phi: 'π/16', controls: [9], targets: [8, 7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 6, phi: 'π/8', controls: [9], targets: [8, 7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 7, phi: 'π/4', controls: [9], targets: [8, 7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= phase_gate bit: 8, phi: 'π/2', controls: [9], targets: [8, 7, 6, 5, 4, 3, 2, 1, 0] %>
    <% end %>
    <%= dropzone do %>
      <%= control_gate bit: 9, targets: [8, 7, 6, 5, 4, 3, 2, 1, 0], controls: [9] %>
    <% end %>
  <% end %>
  <%= circuit_step do %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone do %>
      <%= hadamard_gate %>
    <% end %>
  <% end %>
  <%= circuit_step shadow_source: true do %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
    <%= dropzone %>
  <% end %>
<% end %>
